<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech1World â€” Liquid Identity</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@800&family=Inter:wght@400&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/curtainsjs/8.1.5/curtains.min.js"></script>
    <script src="https://unpkg.com/lenis@1.1.13/dist/lenis.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <style>
        :root { --bg: #050505; --text: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
        
        body { 
            font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); 
            overflow-x: hidden;
        }

        /* 1. WEBGL CANVAS (Must cover screen) */
        #canvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 5; }

        /* 2. LAYOUT */
        #page-wrapper { position: relative; z-index: 10; width: 100%; }
        
        section { 
            height: 100vh; width: 100%; display: flex; align-items: center; 
            justify-content: center; padding: 10vw; position: relative;
        }

        .hero-title {
            font-family: 'Syne'; font-size: 12vw; line-height: 0.85;
            text-transform: uppercase; letter-spacing: -0.04em; text-align: left;
            width: 100%;
        }

        /* IGLOO IMAGE BLOCKS */
        .liquid-plane {
            position: relative; width: 40vw; height: 55vh; 
            overflow: hidden; visibility: hidden; /* Hidden in HTML, shown in WebGL */
        }
        .liquid-plane img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }

        /* CURSOR */
        #cursor {
            position: fixed; width: 10px; height: 10px; background: #fff;
            border-radius: 50%; pointer-events: none; z-index: 10000;
            mix-blend-mode: difference; transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        nav {
            position: fixed; top: 0; width: 100%; padding: 40px;
            display: flex; justify-content: space-between; z-index: 1000;
            font-size: 10px; letter-spacing: 2px; text-transform: uppercase;
        }

        .float-text { position: absolute; bottom: 10%; right: 10%; font-size: 12px; opacity: 0.4; }
    </style>
</head>
<body>

    <div id="canvas"></div>
    <div id="cursor"></div>

    <nav>
        <div style="font-family: 'Syne'; font-weight: 800; font-size: 20px;">T1W.</div>
        <div>( MENU )</div>
    </nav>

    <div id="page-wrapper">
        <section>
            <h1 class="hero-title">INTELLIGENT<br>DYNAMICS</h1>
            <div class="float-text">EST // 2026</div>
        </section>

        <section>
            <div class="liquid-plane">
                <img src="https://images.unsplash.com/photo-1635776062127-d379bfcba9f8?auto=format&fit=crop&w=1200" crossorigin="anonymous">
            </div>
        </section>

        <section>
            <h1 class="hero-title" style="text-align: right;">SYSTEMS<br>THAT FLOW</h1>
        </section>

        <section>
            <div class="liquid-plane">
                <img src="https://images.unsplash.com/photo-1614850523296-d8c1af93d400?auto=format&fit=crop&w=1200" crossorigin="anonymous">
            </div>
        </section>
    </div>

    <script id="plane-vs" type="x-shader/x-vertex">
        precision mediump float;
        attribute vec3 aVertexPosition;
        attribute vec2 aTextureCoord;
        uniform mat4 uMVMatrix;
        uniform mat4 uPMatrix;
        uniform float uVelocity;
        varying vec2 vTextureCoord;
        void main() {
            vec3 pos = aVertexPosition;
            // The "Liquid" Warp: Offset X based on Y position and scroll velocity
            pos.x += sin(pos.y * 1.5 + uVelocity * 0.1) * (uVelocity * 0.005);
            gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);
            vTextureCoord = aTextureCoord;
        }
    </script>

    <script id="plane-fs" type="x-shader/x-fragment">
        precision mediump float;
        varying vec2 vTextureCoord;
        uniform sampler2D uSampler0;
        void main() {
            gl_FragColor = texture2D(uSampler0, vTextureCoord);
        }
    </script>

    <script>
        // 1. INIT SMOOTH SCROLL
        const lenis = new Lenis({ duration: 1.5, lerp: 0.05 });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // 2. INIT WEBGL ENGINE
        const curtains = new Curtains({ container: "canvas", pixelRatio: Math.min(1.5, window.devicePixelRatio) });
        
        const params = {
            vertexShaderID: "plane-vs",
            fragmentShaderID: "plane-fs",
            uniforms: {
                velocity: { name: "uVelocity", type: "1f", value: 0 },
            },
        };

        // 3. CAPTURE PLANES
        const planeElements = document.querySelectorAll(".liquid-plane");
        planeElements.forEach((el, i) => {
            const plane = curtains.addPlane(el, params);
            if(plane) {
                plane.onRender(() => {
                    // Feed scroll velocity into the shader
                    plane.uniforms.velocity.value = lenis.velocity;
                });
            }
        });

        // 4. MOUSE BEHAVIOR
        const cursor = document.getElementById('cursor');
        window.addEventListener('mousemove', (e) => {
            gsap.to(cursor, { x: e.clientX, y: e.clientY, duration: 0.5, ease: "power3.out" });
        });

        // Hover effect for planes
        planeElements.forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to(cursor, { scale: 8, duration: 0.3 }));
            el.addEventListener('mouseleave', () => gsap.to(cursor, { scale: 1, duration: 0.3 }));
        });

        // 5. UPDATE CURTAINS ON SCROLL
        lenis.on('scroll', () => {
            curtains.updateScroll(0, lenis.scroll);
        });
    </script>
</body>
</html>
